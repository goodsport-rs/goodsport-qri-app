<div *ngIf="!(dataLoading$ | async)">
  <div class="row">
    <div class="col-md-3">
      <div class="card radius-15px">
        <!--begin::Card body-->
        <div class="card-toolbar text-end mt-5 pe-5">
          <button class="btn p-0" (click)="openModal(updateImage, 'image')">
            <span class="svg-icon svg-icon-gray me-0 svg-icon-2">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <rect x="0" y="0" width="24" height="24" />
                  <path
                    d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z"
                    fill="#000000" fill-rule="nonzero"
                    transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) " />
                  <rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1" />
                </g>
              </svg>
            </span>
          </button>
        </div>
        <div class="card-body d-flex flex-center flex-column px-9 radius-8px py-9">
          <!--begin::Avatar-->
          <div class="symbol symbol-125px symbol-circle mb-5 profile-pic">
            <span *ngIf="!profileDetails?.imageUrl"
              class="symbol-label fs-3x fw-bold text-white yellow-bg yellow-light-border">
              {{ profileDetails?.firstName.charAt(0)
              }}{{ profileDetails?.lastName.charAt(0) }}
            </span>
            <img src="{{profileDetails?.imageUrl}}" *ngIf="profileDetails?.imageUrl">
          </div>
          <!--begin::Name-->
          <span class="fs-2 text-dark fw-bolder mb-5">
            {{ profileDetails?.firstName }}
            {{ profileDetails?.lastName }}
          </span>
          <!--end::Name-->
          <!--end::Avatar-->
          <div class="card-toolbar mb-5">
            <span class="badge light-green-badge fw-bolder me-auto px-4 py-2" *ngIf="profileDetails?.verified">
              Verified
            </span>
            <span class="badge light-red-badge fw-bolder me-auto px-4 py-2" *ngIf="!profileDetails?.verified">
            Not  Verified
            </span>
          </div>
        </div>
        <!--begin::Card body-->
      </div>
    </div>
    <div class="col-md-9">
      <div class="card radius-15px">
        <div class="card-header border-0 pt-5">
          <div class="card-title mt-3">
            <span class="card-label fw-bolder fs-3 mb-1">Profile</span>
          </div>
          <button class="btn p-0" (click)="openModal(editProfile, 'profile')">
            <span class="svg-icon svg-icon-gray me-0 svg-icon-2">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <rect x="0" y="0" width="24" height="24" />
                  <path
                    d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z"
                    fill="#000000" fill-rule="nonzero"
                    transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) " />
                  <rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1" />
                </g>
              </svg>
            </span>
          </button>
        </div>
        <div class="card-body pt-0 pb-9">
          <table class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-7 mb-3">
            <tbody>
              <tr class="">
                <td>
                  <span class="svg-icon svg-icon-gray svg-icon-2 me-5">
                    <app-keenicon name="briefcase" class="fs-2"></app-keenicon>
                  </span>
                  <span class="text-gray-500 fw-bold"> Name </span>
                </td>
                <td>
                  <span class="text-gray-500 fw-medium">
                    {{ profileDetails?.firstName }}
                    {{ profileDetails?.lastName }}
                  </span>
                </td>
              </tr>
              <tr class="">
                <td>
                  <span class="svg-icon svg-icon-gray svg-icon-2 me-5">
                    <img src="./assets/media/icons/envelope.png" alt="envelope" />
                  </span>
                  <span class="text-gray-500 fw-bold"> Email </span>
                </td>
                <td>
                  <span class="text-gray-500 fw-medium">
                    {{ profileDetails?.username }}
                  </span>
                </td>
              </tr>
              <tr class="">
                <td>
                  <span class="svg-icon svg-icon-gray svg-icon-2 me-5">
                    <img src="./assets/media/icons/mob.png" alt="envelope" />
                  </span>
                  <span class="text-gray-500 fw-bold"> Phone </span>
                </td>
                <td>
                  <span class="text-gray-500 fw-medium">
                    {{ profileDetails?.phoneNumber }}
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="profileDetails?.organizationKYCDone">
    <div class="card mt-5 flex-row ps-8 pt-3 pb-5 flex-wrap">
      <div class="card-toolbar text-end mt-4">
        <img src="./assets/media/illustrations/check.svg" class="h-40px" alt="" />
      </div>

      <div class="card-body d-flex flex-wrap justify-content-start pt-0 pb-3 ps-5">
        <div class="card-header border-0 p-0 w-100 align-items-center">
          <div class="card-title">
            <h4 class="fs-6 bold">Entrepreneur has cleared KYC</h4>
          </div>
        </div>
      </div>
      <div class="w-100 pe-10">
        <div class="bg-gray-200 w-100 card rounded-card p-5 mb-5" *ngFor="let data of allAnswers">
          <h5 class="fw-bold mb-0">
            {{ data?.question }}
          </h5>
          <p class="fw-bolder mb-0">{{ data?.answer ? data?.answer : "-" }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col text-center data-loader mt-5 p-5 pt-7" *ngIf="dataLoading$ | async">
  <div class="spinner-border text-warning" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<!--edit profile modal-->
<ng-template #editProfile let-modal>
  <div class="modal-header px-7">
    <h4 class="modal-title fw-bolder fs-3" id="modal-basic-title">
      Edit Profile
    </h4>
  </div>
  <div class="modal-body">
    <form [formGroup]="form" autocomplete="off" novalidate>
      <div class="fv-row mb-10">
        <div class="d-flex justify-content-between">
          <div class="d-flex flex-stack mb-2">
            <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required">First Name</label>
          </div>
        </div>

        <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="firstName"
          autocomplete="off" formControlName="firstName" />
        <div *ngIf="form.get('firstName')?.touched">
          <div class="fv-plugins-message-container invalid-feedback"
            *ngIf="form.get('firstName')?.hasError('required')">
            First name is required
          </div>
        </div>
      </div>

      <div class="fv-row mb-10">
        <div class="d-flex justify-content-between mt-n5">
          <div class="d-flex flex-stack mb-2">
            <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required">Last Name</label>
          </div>
        </div>

        <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="lastName"
          autocomplete="off" formControlName="lastName" />
        <div class="fv-plugins-message-container invalid-feedback" *ngIf="
            form.get('lastName')?.hasError('required') &&
            form.get('lastName')?.touched
          ">
          Last name is required
        </div>
      </div>

      <div class="fv-row mb-10">
        <div class="d-flex justify-content-between mt-n5">
          <div class="d-flex flex-stack mb-2">
            <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required">Phone Number</label>
          </div>
        </div>

        <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="phoneNumber"
          autocomplete="off" formControlName="phoneNumber" />
        <div *ngIf="form.get('phoneNumber')?.touched">
          <div class="fv-plugins-message-container invalid-feedback"
            *ngIf="form.get('phoneNumber')?.hasError('required')">
            Phone number is required
          </div>
          <div class="fv-plugins-message-container invalid-feedback" *ngIf="
              form.get('phoneNumber')?.hasError('maxlength') ||
              form.get('phoneNumber')?.hasError('minlength')
            ">
            Invalid phone number is not allowed
          </div>
        </div>
      </div>

      <div class="fv-row mb-10">
        <div class="d-flex justify-content-between mt-n5">
          <div class="d-flex flex-stack mb-2">
            <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required">Organization Name</label>
          </div>
        </div>
        <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="organizationName"
          formControlName="organizationName" autocomplete="off" />
        <div *ngIf="form.get('organizationName')?.touched">
          <div class="fv-plugins-message-container invalid-feedback"
            *ngIf="form.get('organizationName')?.hasError('required')">
            Organization name is required
          </div>
        </div>
      </div>

      <div class="fv-row mb-5">
        <div class="d-flex justify-content-between mt-n5">
          <div class="d-flex flex-stack mb-2">
            <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required">Organization Number</label>
          </div>
        </div>

        <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="organizationNumber"
          autocomplete="off" formControlName="organizationNumber" mask="000000-0000" [showMaskTyped]="true" />
        <div *ngIf="form.get('organizationNumber')?.touched">
          <div class="fv-plugins-message-container invalid-feedback"
            *ngIf="form.get('organizationNumber')?.hasError('required')">
            Organization number is required
          </div>
          <div class="fv-plugins-message-container invalid-feedback" *ngIf="
              form.get('organizationNumber')?.hasError('maxlength') ||
              form.get('organizationNumber')?.hasError('minlength')
            ">
            Invalid organization number is not allowed
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer justify-content-center">
    <button type="button" class="btn btn-light w-175px" (click)="modal.close('Save click')"
      [disabled]="btnPrefLoading$ | async">
      Discard
    </button>
    <button type="button" class="btn yellow-button w-175px" (click)="onClickEditUpdate(modal)"
      [disabled]="btnPrefLoading$ | async">
      <ng-container *ngIf="btnPrefLoading$ | async">
        <span class="indicator-progress" [style.display]="'block'">
          Please wait...
          <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
        </span>
      </ng-container>
      <ng-container *ngIf="!(btnPrefLoading$ | async)">
        <span class="indicator-label">Update</span>
      </ng-container>
    </button>
  </div>
</ng-template>
<!--edit profile modal-->

<!--edit profile perfrences modal-->
<ng-template #updateImage let-modal>
  <div class="modal-header px-7">
    <h4 class="modal-title fw-bolder fs-3" id="modal-basic-title">
      Update Profile Image
    </h4>
  </div>
  <div class="modal-body">
    <div class="fv-row mb-5">
      <label class="form-label fw-medium text-gray-400 fs-6 mb-0 required mb-2">Image URL</label>
      <input class="form-control form-control-lg border-gray-200 h-40 px-4 fs-6" type="text" name="logoUrl"
        [(ngModel)]="logoUrl" autocomplete="off" />
      <div class="fv-plugins-message-container">
        Only .png, .jpg and .jpeg files are allowed
      </div>
    </div>
  </div>
  <div class="modal-footer justify-content-center">
    <button type="button" class="btn btn-light w-175px" (click)="modal.close('Save click')"
      [disabled]="btnPrefLoading$ | async">
      Discard
    </button>
    <button type="button" class="btn yellow-button w-175px" (click)="onUpdateLogoImage(modal)"
      [disabled]="btnPrefLoading$ | async">
      <ng-container *ngIf="btnPrefLoading$ | async">
        <span class="indicator-progress" [style.display]="'block'">
          Please wait...
          <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
        </span>
      </ng-container>
      <ng-container *ngIf="!(btnPrefLoading$ | async)">
        <span class="indicator-label">Update</span>
      </ng-container>
    </button>
  </div>
</ng-template>
<!--edit profile modal-->

<!--view kyc modal-->
<ng-template #viewKyc let-modal>
  <div class="modal-header px-10">
    <h4 class="modal-title fw-bolder" id="modal-basic-title">KYC</h4>
  </div>
  <div class="modal-body">
    <div class="card">
      <!--begin::Card body-->

      <div>
        <div class="fv-row mb-10 fv-plugins-icon-container" *ngFor="let data of allAnswers">
          <label class="d-flex align-items-center fs-5 fw-bold mb-2">
            <span class="required">{{ data?.question }}</span>
          </label>
          <p>{{ data?.answer ? data?.answer : "-" }}</p>
        </div>
      </div>
      <!--begin::Card body-->
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light w-200px" (click)="modal.close('Save click')">
      Close
    </button>
  </div>
</ng-template>
<!--view kyc modal-->
