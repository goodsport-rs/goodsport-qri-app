<div
  class="col-md-12 d-flex justify-content-between bg-white card flex-row card-rounded flex-stack flex-wrap p-7 mb-9 ps-15 pe-10 radius-8px">
  <span class="fs-1 bold">Mina projekt</span>

  <form data-kt-search-element="form" class="position-relative bg-light px-3 col-md-3 radius-8px" autocomplete="off">
    <span class="svg-icon svg-icon-2  svg-icon-gray-500 position-absolute top-50 translate-middle-y ms-0">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1"
          transform="rotate(45 17.0365 15.1223)" fill="black"></rect>
        <path
          d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z"
          fill="black"></path>
      </svg>
    </span>

    <input type="text" class="form-control form-control-flush ps-10" name="search" value="" placeholder="SÃ¶k..."
      data-kt-search-element="input" [(ngModel)]="search" (keyup.enter)="onEnterSearch()" />
  </form>
</div>

<div class="row g-10">

  <div class="row g-10" *ngIf="!(dataLoading$ | async)">
    <div class="col-md-3" *ngFor="let data of allProjects">
      <a [routerLink]="['./details', data.id]" class="card h-100">
        <img class="bannerImg" src="./assets/media/categories/{{data?.categoryId}}-banner.png" />
        <div class="card-header border-0 mb-0 ps-4 pe-4">
          <div class="card-toolbar">
            <span class="badge light-green-badge fw-bolder me-auto px-4 py-2 rounded-pill text-uppercase"
              *ngIf="data?.projectStatus === 'NEW'">{{ data?.projectPhase }} Started</span>
            <span class="badge light-green-badge fw-bolder me-auto px-4 py-2 rounded-pill text-uppercase"
              *ngIf="data?.projectStatus === 'APPROVED'">
              Project Approved</span>
            <span class="badge light-blue-badge fw-bolder me-auto px-4 py-2 rounded-pill text-uppercase"
              *ngIf="data?.projectStatus === 'ACCEPTED'">
              Open for Investment</span>
            <span class="badge light-red-badge fw-bolder me-auto px-4 py-2 rounded-pill text-uppercase"
              *ngIf="data?.projectStatus === 'DECLINED'">
              Project Rejected</span>
            <span class="badge light-purple-badge fw-bolder me-auto px-4 py-2 rounded-pill text-uppercase"
              *ngIf="data?.projectStatus === 'PENDING'">
              {{ data?.projectPhase }} Submitted</span>
          </div>
          <div class="card-toolbar">
            <td class="text-end">
              <div class="d-flex flex-column w-100 me-2">
                <div class="d-flex flex-stack mb-2">
                  <span class="text-muted me-2 fs-7 fw-bold">
                    <ng-container [ngSwitch]="data?.projectPhase">
                      <ng-container *ngSwitchCase="'IDEA'">
                        <ng-container [ngSwitch]="data?.projectStatus">
                          <ng-container *ngSwitchCase="'NEW'">0%</ng-container>
                          <ng-container *ngSwitchCase="'PENDING'">17%</ng-container>
                        </ng-container>
                      </ng-container>
                      <ng-container *ngSwitchCase="'PLAN'">
                        <ng-container [ngSwitch]="data?.projectStatus">
                          <ng-container *ngSwitchCase="'NEW'">33%</ng-container>
                          <ng-container *ngSwitchCase="'PENDING'">50%</ng-container>
                        </ng-container>
                      </ng-container>
                      <ng-container *ngSwitchCase="'FUNDING'">
                        <ng-container [ngSwitch]="data?.projectStatus">
                          <ng-container *ngSwitchCase="'NEW'">66%</ng-container>
                          <ng-container *ngSwitchCase="'PENDING'">83%</ng-container>
                          <ng-container *ngSwitchCase="'ACCEPTED'">90%</ng-container>
                          <ng-container *ngSwitchCase="'APPROVED'">100%</ng-container>
                        </ng-container>
                      </ng-container>
                      <ng-container *ngSwitchCase="'REPORTING'">100%
                      </ng-container>
                    </ng-container>
                  </span>
                </div>
                <div class="progress h-6px w-100">
                  <ng-container [ngSwitch]="data?.projectPhase">
                    <ng-container *ngSwitchCase="'IDEA'">
                      <ng-container [ngSwitch]="data?.projectStatus">
                        <ng-container *ngSwitchCase="'NEW'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'0%'"></div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'PENDING'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'17%'"></div>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'PLAN'">
                      <ng-container [ngSwitch]="data?.projectStatus">
                        <ng-container *ngSwitchCase="'NEW'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'33%'"></div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'PENDING'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'50%'"></div>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'FUNDING'">
                      <ng-container [ngSwitch]="data?.projectStatus">
                        <ng-container *ngSwitchCase="'NEW'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'66%'"></div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'PENDING'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'83%'"></div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ACCEPTED'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'90%'"></div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'APPROVED'">
                          <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'100%'">
                          </div>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'REPORTING'">
                      <div class="progress-bar bg-primary yellow-bg" role="progressbar" [style.width]="'100%'"></div>
                    </ng-container>
                  </ng-container>
                </div>
              </div>
            </td>
          </div>
        </div>


        <div class="card-body pt-0 pb-5 ps-4">
          <!-- <div class="card-toolbar mb-2">
            <span class="badge light-yellow-badge fw-bolder me-auto px-4 py-2"
              *ngIf="data?.projectStatus === 'PENDING'">Pending</span>
            <span class="badge light-green-badge fw-bolder me-auto px-4 py-2" *ngIf="data?.projectStatus === 'APPROVED'">
              Approved</span>
            <span class="badge light-red-badge fw-bolder me-auto px-4 py-2" *ngIf="data?.projectStatus === 'DECLINED'">
              Rejected</span>
            <span class="badge light-blue-badge fw-bolder me-auto px-4 py-2" *ngIf="data?.projectStatus === 'NEW'">
              New</span>
          </div> -->
          <div class="m-0">
            <span class="fs-6 text-dark bold text-hover-primary text-dark lh-base">{{ data?.title }}</span>
            <div class="fw-medium fs-9 mt-1 limit-text card-des-text">
              {{ data?.description }}
            </div>
          </div>
        </div>
      </a>
    </div>
  </div>

  <div class="col text-center data-loader mt-10 p-5 pt-7" *ngIf="dataLoading$ | async">
    <div class="spinner-border text-warning" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div class="col-sm-12 mt-10 d-flex align-items-center justify-content-center justify-content-md-end">
    <ngb-pagination [collectionSize]="totalPages" [(page)]="page" [maxSize]="3" (pageChange)="onPageChange()">
    </ngb-pagination>
  </div>
</div>
